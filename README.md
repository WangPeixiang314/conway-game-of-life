# 康威生命游戏 - GPU/CPU 高性能版本

一个基于康威生命游戏规则的高性能细胞自动机模拟器，支持GPU加速和交互式操作。本项目使用Pygame构建图形界面，通过Numba实现CPU优化，可选CUDA实现GPU加速。

## 🎮 功能特性

### 核心功能
- **经典生命游戏规则**：严格遵循康威生命游戏的四个基本规则
- **GPU加速支持**：利用CUDA实现GPU并行计算，大幅提升性能
- **CPU优化**：使用Numba JIT编译器优化CPU计算性能
- **实时交互**：支持鼠标绘制、擦除操作

### 可视化特性
- **高清渲染**：800×440网格，2像素单元格大小
- **流畅动画**：可调节帧率（15-300 FPS）
- **现代化界面**：深色主题，实时状态显示
- **实时统计**：显示当前代数、活细胞数量、计算时间、FPS等信息

### 交互功能
- **画笔工具**：可调节大小的圆形画笔（1-30像素）
- **聚集生成**：基于高斯分布的随机初始状态生成
- **暂停/恢复**：随时暂停和恢复模拟
- **清屏功能**：一键清空所有细胞
- **重置功能**：重新生成随机初始状态
- **网格显示**：可切换显示/隐藏网格线

### 性能特性
- **智能设备切换**：运行时动态切换CPU/GPU计算模式
- **内存优化**：使用NumPy数组和Numba JIT优化
- **并行计算**：支持多核CPU和GPU并行处理

## 🚀 快速开始

### 环境要求
- Python 3.11+
- 支持CUDA的NVIDIA显卡（可选，用于GPU加速）

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行程序
```bash
python main.py
```

## 🎯 游戏规则

康威生命游戏的四个基本规则：

1. **生存**：任何活细胞周围有2或3个活细胞，下一代继续存活
2. **死亡**：任何活细胞周围少于2个或多于3个活细胞，下一代死亡
3. **繁殖**：任何死细胞周围恰好有3个活细胞，下一代变为活细胞
4. **静止**：其他情况保持原状态

*注：边界采用周期性（环绕）边界条件*

## 🎮 操作说明

### 鼠标操作
- **左键拖动**：绘制活细胞（根据当前画笔大小）
- **保存模式开**：左键只添加活细胞，不擦除
- **保存模式关**：左键切换细胞状态（活↔死）

### 界面按钮
- **暂停/继续**：控制模拟运行状态
- **重置**：重新生成随机初始状态
- **切换网格**：显示/隐藏网格线
- **清空**：清除所有活细胞
- **保存模式**：切换画笔模式（添加/切换）
- **减小画笔**：减小画笔半径（最小1）
- **增大画笔**：增大画笔半径（最大30）
- **帧率-**：降低模拟帧率（最小15 FPS）
- **帧率+**：提高模拟帧率（最大300 FPS）
- **切换到CPU/GPU**：在CPU和GPU计算模式间切换

### 键盘快捷键
程序主要依赖鼠标操作，无预设键盘快捷键。

## 🔧 技术架构

### 核心技术栈
- **Pygame 2.5.2+**：图形界面和渲染
- **NumPy 1.24.3+**：数值计算和数组操作
- **Numba 0.58.0+**：JIT编译优化
- **CUDA**（可选）：GPU并行计算

### 性能特点
- **CPU模式**：使用Numba JIT和并行计算，性能远超纯Python实现
- **GPU模式**：CUDA内核并行处理，适合大规模计算
- **内存效率**：使用uint8数据类型，内存占用优化

### 配置参数
- **网格尺寸**：800×440（352,000个细胞）
- **初始密度**：41%
- **聚集中心**：4个高斯分布中心
- **聚集半径**：345像素
- **默认帧率**：60 FPS

## 🎨 界面说明

### 主界面布局
- **上部网格区域**：显示细胞状态和网格
- **下部控制面板**：包含所有控制按钮和状态信息

### 状态信息
- **设备**：当前使用的计算设备（CPU/GPU）
- **计算时间**：每次迭代的计算耗时（毫秒）
- **帧率**：当前运行帧率
- **代数**：已进行的模拟代数
- **活细胞**：当前活细胞数量和百分比
- **状态**：运行/暂停状态
- **保存模式**：画笔模式状态
- **画笔大小**：当前画笔半径

## ⚠️ 注意事项

1. **GPU支持**：需要安装支持CUDA的NVIDIA显卡和驱动
2. **字体显示**：程序会尝试加载中文字体，失败时会使用系统默认字体
3. **性能差异**：GPU模式在支持设备上性能更好，但首次运行有初始化开销
4. **边界处理**：采用周期性边界条件，细胞可以从一边穿出从另一边进入

## 📄 许可证

本项目采用MIT许可证，详见 [LICENSE](LICENSE) 文件。

## 🤝 贡献

欢迎提交Issue和Pull Request改进项目！

---

*生命游戏，在代码中演化*